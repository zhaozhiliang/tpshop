define("api/searchMember",["config/url"],function(e){return{getInfo:{apiName:"miscSearchmember",isOnlyData:1,post:{areaCode:"?",token:"?",body:"??"},body:{},method:"post"}}}),define("model/searchMember",["lib/common","api/searchMember"],function(e,t){function n(n,r){var i={token:e.cookie.getH5("token"),areaCode:e.cookie.getH5("siteid"),body:{}},n=n||{};n.body&&e.merge(i.body,n.body),e.xsr(e.makeUrl(t.getInfo,i),function(e){try{r&&r(e)}catch(t){throw t}})}return{getSearchMember:n}}),define("api/jifen",["lib/common","config/url"],function(e,t){return{info:{apiName:"pointGetpointinfo",isOnlyData:1,post:{token:e.cookie.getH5("token"),cityCode:e.cookie.getH5("siteid"),areaCode:e.cookie.getH5("siteid"),body:"??"},body:{},method:"post"},point:{apiName:"pointGetpoint",isOnlyData:1,post:{token:e.cookie.getH5("token"),cityCode:e.cookie.getH5("siteid"),areaCode:e.cookie.getH5("siteid"),body:"??"},body:{pageIndex:"?",onePageSize:"?",type:"?"},method:"post"}}}),define("model/jifen/index",["lib/common","api/jifen"],function(e,t){function n(n,r){var n=n||{},i={token:n.token,cityCode:n.cityCode,channel:n.channel,clientid:n.clientid,view_size:n.view_size,body:{}};n.body&&e.merge(i.body,n.body),e.xsr(e.makeUrl(t.info,i),function(e){try{r&&r(e)}catch(t){throw t}})}function r(n,r){var n=n||{},i={token:n.token,cityCode:n.cityCode,body:{pageIndex:n.pageIndex,onePageSize:n.pageSize,type:n.type}};n.body&&e.merge(i.body,n.body),e.xsr(e.makeUrl(t.point,i),function(e){try{r&&r(e)}catch(t){throw t}})}return{info:n,point:r}}),define("widget/loadingV2",["lib/common"],function(e){function u(t,n,s,u){f();var l=e.extend(!0,{},o);typeof t=="object"?e.extend(!0,l,t):(l.off=t,l.topOn=typeof s=="boolean"?s:l.topOn,l.D_dom=u||l.D_dom,typeof n=="boolean"?(l.name=r,l.topOn=n):typeof n=="object"?(l.D_dom=n,l.name=i,l.topOn=!1):l.name=n||r),a(l)}function a(e){var n,r=0;n=t[e.name]||!1;if(n)return typeof e.off=="undefined"||typeof e.off=="string"?t[e.off||e.name].data("count")>>0:(r=n.data("count")>>0,e.off?(n.data("count",++r),r==1&&(e.D_dom.append(n),h(n,e),e.topOn&&e.name!="none"&&c(n,e.topOn))):(n.data("count",--r),r<=0&&(l(n,e),e.name!="none"&&c(n,!1))),name)}function f(){e("[data-load-name]").each(function(){var n=e(this);t[n.data("load-name")]=n})}function l(e,r){typeof e=="string"?e=t[e]:typeof e=="undefined"&&(e=t[r.name]),e.data("count",0),e.remove(),n.off("scroll.loading")}function c(t,r){var i=[],o=e(".top_nav");e.each(s,function(t,n){i=e(n);if(i.length)return!1}),r&&i.length?(n.off("scroll.loading").on("scroll.loading",function(){var e=i.height()+i.offset().top,r=e-n.scrollTop(),s=n.height()-r;t.css({"padding-top":r>0?r:0})}),h(i),i.addClass("z100")):(n.off("scroll.loading"),t.css({"padding-top":""}),i.removeClass("z100")),o.length&&(r?o.addClass("z100"):o.removeClass("z100"))}function h(e){e&&e.off("touchmove.preventDefault").on("touchmove.preventDefault",function(){event.preventDefault()})}var t={none:e("<div></div>"),p1:e('<p class="loading_pop all"><b></b></p>'),p2:e('<p class="loading_btm"><b></b><i>正在努力加载...</i></p>'),v2:e('<p class="loading_pop all"><b></b></p>')},n=e(window),r="p1",i="p2",s=["[data-loading-top]","header",".top_box"];(function(){var n=navigator.userAgent.toLowerCase();if(n.indexOf("qqbrowser")>-1||n.indexOf("ucbrowser")>-1){t.p2=e('<p class="loading_btm"><em></em><i>正在努力加载...</i></p>'),t.p1=e('<p class="loading_pop all"><em></em></p>'),t.v2=e('<p class="loading_pop all"><em></em></p>');var r=1;setInterval(function(){var n=r%18;e.each(t,function(){e(".loading_pop").find("em").css("background-position",-0.9*n+"rem 0")}),r++},40)}})();var o={off:r,name:r,topOn:!0,D_dom:e("body")};return{on:u,off:l}}),function(e){function t(t){function n(){if(this.udid)return this.udid;var e="",t=this.getTime();return e+="H5_"+t+this.randomString(10),this.udid=e,e}t=t||{},this.ua=navigator.userAgent,this.udid="",this.env=null,this.resolution=e.screen.width+"|"+e.screen.height,this.cookieDomain=function(){var e=/m\.feiniu\.com/i.test(location.href);return e?".feiniu.com":location.hostname.split(".").slice(-2).join(".")},this.getTime=function(){return(new Date).getTime()},this.randomString=function(e){var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");e||(e=Math.floor(Math.random()*t.length));var n="";for(var r=0;r<e;r++)n+=t[Math.floor(Math.random()*t.length)];return n},this.createUdid=typeof t.createUdid=="function"?t.createUdid:n,this.getcookie=function(e){var t=new RegExp("(^|;|\\s+)"+e+"=([^;]*)(;|$)"),n=document.cookie.match(t);return n?decodeURIComponent(n[2]):""},this.addcookie=function(e,t,n,r,i){var s=e+"="+encodeURIComponent(t)+"; path="+(n||"/")+(i?"; domain="+i:"");if(r>0){var o=new Date;o.setTime(o.getTime()+r*1e3),s+=";expires="+o.toGMTString()}document.cookie=s},this.delcookie=function(e,t,n){arguments.length==2&&(n=t,t="/"),document.cookie=e+"=;path="+t+";"+(n?"domain="+n+";":"")+"expires=Thu, 01-Jan-70 00:00:01 GMT"},this.getUdid=function(){var e="th5_stat_udid",t=this.getcookie(e);if(t)return t;var n=this.createUdid(),r=31536e3,i=/feiniu\.com/i.test(location.href),s=".feiniu.com";return i||(s=location.hostname.split(".").slice(-2).join(".")),this.addcookie(e,n,"/",r,s),n},this.getEnv=function(){if(this.env!=null)return this.env;var e=["m","preview","test","dev","dev1","local"],t="m",n=location.hostname.split(".");if(n[0])for(var r in e)if(e[r]==n[0]){t=n[0];continue}return this.setEnv(t),t},this.setEnv=function(e){this.env=e},this.getSystemType=function(){var e=this.ua;e=e.toLowerCase();var t="";return e.indexOf("android")>-1||e.indexOf("linux")>-1?t="android":e.indexOf("iphone")>-1||e.indexOf("ipad")>-1||e.indexOf("itouch")>-1||e.indexOf("ipod")>-1||e.indexOf("mac")>-1?t="ios":e.indexOf("windows phone")>-1?t="wp":t="windows",t},this.mix=function(){var e={};for(var t=0;t<arguments.length;t++){var n=arguments[t];for(var r in n)r in e?n[r]!=undefined&&(e[r]=n[r]):e[r]=n[r]}return e},this.getUrlParam=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=location.search.substr(1).match(t);return n!=null?decodeURIComponent(n[2]):null},this.getMessage=function(){var e=this.getUrlParam("fromtype");return e==null&&(e=document.referrer?document.referrer:""),e},this.getRemarksCfg=function(){var e={terminal_os_ver:"",model:"",brand:"",resolution:this.resolution,browser_type:"",mac:""};return JSON.stringify(this.mix(e))},this.isClient=function(){var e="th5_stat_token",t=86400,n=this.getcookie("th5_token")||"",r=this.getcookie("th5_stat_token")||"";if(n&&r==n)return"";if(r=="-1")return n&&this.addcookie(e,n,"/",t,this.cookieDomain()),"";if(r!=n||!r){var n=n||"-1";this.addcookie(e,n,"/",t,this.cookieDomain())}return this.getRemarksCfg()};var r=this.getTime(),i=this.getcookie("th5_username")||"",s=this.getcookie("th5_sitename")||"",o=this.getcookie("th5_mem_guid")||"";!o&&i&&(o=i),this.getLandingUrl=function(){var t="th5_landing_url",n=this.getcookie(t)||"",r=1800;if(n)return this.addcookie(t,n,"/",r,this.cookieDomain()),n;var i=e.location.href;return this.addcookie(t,i,"/",r,this.cookieDomain()),i},this.getLandingSession=function(){var e="th5_landing_session",t=this.getcookie(e)||"",n=1800;if(t)return this.addcookie(e,t,"/",n,this.cookieDomain()),t;var r="";return r+="H5_"+this.getTime()+this.randomString(10),this.addcookie(e,r,"/",n,this.cookieDomain()),r},this.setLandingSession=function(e){var t="th5_landing_session",n=1800;this.addcookie(t,e,"/",n,this.cookieDomain())},this.getAppid=function(){var e=navigator.userAgent;e=e.toLowerCase();if(navigator.userAgent.indexOf("feiniuapp")>-1){var t=navigator.userAgent.split(" ");for(var n=0;n<t.length;n++)if(t[n].indexOf("feiniuapp")>-1){var r=t[n].split("/"),i=r[1].toLowerCase();if(i=="android")return 1;if(i=="iphone")return 2;if(i=="ipad")return 4;if(i=="winphone")return 5}}else{if(this.getUrlParam("osType")&&this.getUrlParam("osType")!="")return e.match(/MicroMessenger/i)=="micromessenger"?9:this.getUrlParam("osType");if(e.match(/MicroMessenger/i)=="micromessenger")return 9}return 3},this.statAppVal=function(){var e={},t=this.getcookie("th5_stat_app");if(t)try{e=JSON.parse(t)}catch(n){}if(typeof e=="undefined"||!e)e={};return e},this.urlConfigParam={udid:this.getUdid(),mem_guid:o,user_name:i,terminal_os:this.getSystemType(),track_code:this.getcookie("th5_channel_edm_code")||"",network:"",gps:"",city:s,track_tag_name:"",result:"",page_content:"",message:"",cur_req_url:location.href,landing_url:"",session_id:"",track_type:1,referer_url:document.referrer||"",startTime:r,endTime:r,abtest:0,remarks:"",ver:"",traffic_channel:"",dev_type:this.getAppid(),ref_page_id:"",client_type:0},this.shangbao=function(t,n,r){var i="",s=this.getEnv();s=="m"?i="http://flume.feiniu.com/AppCollectLogs/AddH5Log?v="+this.getTime():s=="preview"?i="/stat.php?env=preview&v="+this.getTime():i="/stat.php?env=test&v="+this.getTime(),i+=this.randomString(2);var t=t||{};t.message=="-9"&&(t.message=this.getMessage());var o=this.statAppVal();typeof o=="object"&&(t.client_type=o.client_type,t.ver=o.ver,t.traffic_channel=o.traffic_channel,t.gps=o.gps,t.network=o.network,o.session_id&&this.setLandingSession(o.session_id)),t.landing_url=this.getLandingUrl(),t.session_id=this.getLandingSession();var u=this.mix(this.urlConfigParam,t);for(j in u)u[j]=="-9"&&(u[j]="0"),i+="&"+j+"="+encodeURIComponent(u[j]);typeof n!="function"&&(n=function(){});if(navigator.sendBeacon)navigator.sendBeacon(i,""),n();else{var a=new Image,f;try{var l=new $.Deferred,c=function(){a.removeEventListener("load",c,!1),a.removeEventListener("error",c,!1),clearTimeout(f),n(),l.resolve()};a.addEventListener("load",c,!1),a.addEventListener("error",c,!1),f=setTimeout(c,r||1e3),a.src=i,e._deferRedirect=l}catch(h){a.src=i,n()}}}}var n={isObj:0,shangbao:function(e,n,r){var i="";if(this.isObj)i=this.isObj;else{i=new t(this.opt),this.isObj=i;if(e.h5_type=="edm"){if(i.getUrlParam("tracking_type")!="h5_edm")return"";var s=i.getUrlParam("type");(s=="h5_dev"||s=="h5_test"||s=="h5_beta")&&i.setEnv("test")}var o=i.isClient();if(o){var u={track_tag_name:"1000",result:"",page_content:"",message:"-9",track_type:"6",remarks:o};i.shangbao(u,n,r)}}i.shangbao(e,n,r)},getRemarksCfg:function(){var e="";return this.isObj?e=this.isObj:(e=new t,this.isObj=e),e.getRemarksCfg()}};e.h5stat=n;if(typeof define=="function"&&define.amd)define("widget/stat",["lib/common"],function(t){return e.h5stat});else if(typeof e.Zepto=="undefined"){var r=document.createElement("script");r.src=e.feiniu.url.jsBase+"/lib/zepto.min.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(r,i)}}(window),define("api/myAccount",["config/url"],function(e){return{memberIndex:{apiName:"miscMemberindex",isOnlyData:1,post:{token:"?",body:"??"},body:{}},memberInfo:{apiName:"miscMemberInfo",isOnlyData:1,post:{apiVersion:e.apiVersion,token:"?",body:"??"},body:{}},choiceSex:{apiName:"miscUpdatememberinfo",isOnlyData:1,post:{apiVersion:e.apiVersion,token:"?",body:"??"},body:{sex:"?",nickName:"?"}},signin:{apiName:"miscSignin",isOnlyData:1,post:{apiVersion:e.apiVersion,token:"?",body:"??"},body:{}},signin_1:{apiName:"miscSignin",isOnlyData:1,post:{apiVersion:e.apiVersion,token:"?",body:"??"},body:{}},checkSigned:{url:e.sappsDomain+"misc/checkSigned",isOnlyData:1,post:{apiVersion:e.apiVersion,token:"?",body:"??"},body:{}},freeBuyForCard:{url:e.sappsDomain+"vvip/freeBuyForCard",isOnlyData:1,post:{apiVersion:e.apiVersion,areaCode:"?",token:"?",body:"??"},body:{}}}}),define("model/account/myAccount",["lib/common","api/myAccount","config/url"],function(e,t,n){function r(){var t={token:e.cookie.getH5("token"),body:{}};return t}function i(n,i){var s=r();n.body&&e.merge(s.body,n.body),e.xsr(e.makeUrl(t.memberIndex,s),function(e){try{i&&i(e)}catch(t){throw t}})}function s(){var t={token:e.cookie.getH5("token"),body:{}};return t}function o(n,r){var i=s();n.body&&e.merge(i.body,n.body),e.xsr(e.makeUrl(t.memberInfo,i),function(e){try{r&&r(e)}catch(t){throw t}})}function u(){var t={token:e.cookie.getH5("token"),body:{}};return t}function a(n,r){var i=u();n.body&&e.merge(i.body,n.body),e.xsr(e.makeUrl(t.choiceSex,i),function(e){try{r&&r(e)}catch(t){throw t}})}function f(){var t={token:e.cookie.getH5("token"),body:{}};return t}function l(n,r){var i=f();n.body&&e.merge(i.body,n.body),e.xsr(e.makeUrl(t.signin,i),function(e){try{r&&r(e)}catch(t){throw t}})}function c(n,r){var i=f();n.body&&e.merge(i.body,n.body),e.xsr(e.makeUrl(t.signin_1,i),function(e){try{r&&r(e)}catch(t){throw t}})}function h(){var t={token:e.cookie.getH5("token"),body:{}};return t}function p(n,r){var i=h();n.body&&e.merge(i.body,n.body),e.xsr(e.makeUrl(t.checkSigned,i),function(e){try{r&&r(e)}catch(t){throw t}})}function d(){var t={token:e.cookie.getH5("token"),areaCode:e.cookie.getH5("siteid"),body:{}};return t}function v(n,r){var i=d();n.body&&e.merge(i.body,n.body),e.xsr(e.makeUrl(t.freeBuyForCard,i),function(e){try{r&&r(e)}catch(t){throw t}})}return{memberIndex:i,memberInfo:o,choiceSex:a,signin:l,signin_1:c,checkSigned:p,freeBuyForCard:v}}),define("widget/popAlert",["lib/common"],function(e){function t(t,n,r){if(typeof t=="undefined")return"";var i=n?"popbg tmbg":"popbg",r=r||3e3;window.popAlertIndex=(window.popAlertIndex||0)+1;var s="popalert_"+window.popAlertIndex,o=['<div class="'+i+'" id="'+s+'" >','<div class="popbox">','<p class="poptxt">'+t+"</p>","</div></div>"].join("");e("body").append(o);var u=e("#"+s);u.on("click",function(){u.remove()}),setTimeout(function(){u.remove()},r)}function n(t,n,r){if(typeof t=="undefined")return"";window.popAlertIndex=(window.popAlertIndex||0)+1;var i="popalert_"+window.popAlertIndex,s="close_popalert_"+window.popAlertIndex,o="fun_popalert_"+window.popAlertIndex,u=s,a="",f="";typeof n=="function"&&(u=o,a='<p id="'+s+'">取消</p>',f='<p class="poptip">提示</p>');var l=['<div class="popbg" id="'+i+'">','<div class="popbox">',f,'<p class="poptxt">'+t+"</p>",'<div class="popbtnbox">',a,'<p id="'+u+'">确定</p>',"</div></div></div>"].join("");e("body").append(l);var c=e("#"+i);e("#"+s).on("click",function(){c.remove()}),e("#"+o).on("click",function(){n(r),c.remove()})}function r(t,n,r,i){if(typeof t=="undefined")return"";if(typeof n=="undefined")return"";window.popAlertIndex=(window.popAlertIndex||0)+1;var s="popalert_"+window.popAlertIndex,o="close_popalert_"+window.popAlertIndex,u="fun_popalert_"+window.popAlertIndex,a=o,f="",l="";typeof i=="function"&&(a=u,f='<p id="'+o+'">取消</p>',l='<p class="poptip">'+t+"</p>");var c=['<div class="popbg" id="'+s+'">','<div class="popbox">',l,'<input type="'+r+'" class="popinput" placeholder="'+n+'" />','<div class="popbtnbox">',f,'<p id="'+a+'">确定</p>',"</div></div></div>"].join("");e("body").append(c);var h=e("#"+s);e("#"+o).on("click",function(){h.remove()}),e("#"+u).on("click",function(){i(),h.remove()})}function i(t){if(typeof t.msg=="undefined")return"";if(typeof t.one=="undefined"||typeof t.one.name=="undefined")return"";var n="",r="";t.icon&&t.icon.isIcon&&(n=t.icon.iconClass?t.icon.iconClass:"situs",r='<i class="'+n+'"></i>');var i=t.tip?t.tip:"提示";window.popAlertIndex=(window.popAlertIndex||0)+1;var s="popalert_"+window.popAlertIndex,o="one_popalert_"+window.popAlertIndex,u="two_popalert_"+window.popAlertIndex,a=t.popClass||"",f="";t.one&&(f+='<p id="'+o+'">'+t.one.name+"</p>"),t.two&&t.two.name!=""&&(f+='<p id="'+u+'">'+t.two.name+"</p>");var l=t.id||"",c=['<div class="popbg '+a+'" id="'+s+'">','<div class="popbox '+l+'">',r,'<p class="poptip">'+i+"</p>",'<p class="poptxt">'+t.msg+"</p>",'<div class="popbtnbox">',f,"</div></div></div>"].join("");e("body").append(c),typeof t.initFun=="function"&&t.initFun(s);var h=e("#"+s),p=function(){h.remove()},d=typeof t.one.fun=="function"?function(){var e=t.one.noClose?t.one.noClose:0;e||p(),t.one.fun()}:p;e("#"+o).on("click",d);if(t.two&&t.two.fun!=""){var v=typeof t.two.fun=="function"?function(){var e=t.two.noClose?t.two.noClose:0;e||p(),t.two.fun()}:p;e("#"+u).on("click",v)}}return{popalert:t,popconfirm:n,popinput:r,popdefine:i}}),define("api/recommend",["config/url"],function(e){return{recGuessYouLike:{apiName:"bigDataRecGuessYouLike",isOnlyData:1,post:{apiVersion:e.apiVersion,token:"?",areaCode:"?",view_size:"720x1280",body:"??"},body:{items_id:"?",uuid:"?",mem_guid:"?"},method:"post"},recshopcart:{apiName:"bigDataRecshopcart",isOnlyData:1,post:{apiVersion:e.apiVersion,token:"?",areaCode:"?",view_size:"720x1280",body:"??"},body:{items_id:"?",uuid:"?",mem_guid:"?"},method:"post"},RecShopCart:{apiName:"bigDataRecShopCart",isOnlyData:1,post:{apiVersion:e.apiVersion,token:"?",areaCode:"?",view_size:"720x1280",body:"??"},body:{items_id:"?",uuid:"?",mem_guid:"?"},method:"post"},cartsimilaritems:{apiName:"bigDataCartsimilaritems",isOnlyData:1,post:{apiVersion:e.apiVersion,token:"?",areaCode:"?",view_size:"720x1280",body:"??"},body:{items_id:"?",uuid:"?",mem_guid:"?"},method:"post"},recLookAgain:{apiName:"bigDataRecLookAgain",isOnlyData:1,post:{apiVersion:e.apiVersion,token:"?",areaCode:"?",view_size:"720x1280",body:"??"},body:{items_id:"?",uuid:"?",mem_guid:"?"},method:"post"},appMallLook:{apiName:"bigDataAppMallLook",isOnlyData:1,post:{apiVersion:e.apiVersion,token:"?",areaCode:"?",view_size:"720x1280",body:"??"},body:{items_id:"?",uuid:"?",mem_guid:"?"},method:"post"},mobileIndexGuess:{apiName:"bigDataMobileIndexGuess",isOnlyData:1,post:{apiVersion:e.apiVersion,token:"?",areaCode:"?",view_size:"720x1280",body:"??"},body:{mem_guid:"?",uuid:"?",page:"?"},method:"post"},recbuyagain:{apiName:"bigDataRecbuyagain",isOnlyData:1,post:{apiVersion:e.apiVersion,token:"?",areaCode:"?",view_size:"720x1280",body:"??"},body:{items_id:"?",uuid:"?",mem_guid:"?"},method:"post"},RecKeywordSearch:{url:e.gappDomain+"general/RecKeywordSearch",isOnlyData:1,post:{apiVersion:e.apiVersion,token:"?",areaCode:"?",view_size:"720x1280",body:"??"},body:{is_attribute:"?",is_category:"?",sortOrder:"?",cate:"?",search_price:"?",keywords:"?",pageIndex:"?",onePageSize:"?",sortType:"?"},method:"post"}}}),define("model/recommend/index",["lib/common","api/recommend"],function(e,t){function n(){return{token:e.cookie.getH5("token"),areaCode:e.cookie.getH5("siteid"),body:{uuid:"",mem_guid:e.cookie.getH5("mem_guid"),items_id:""}}}function r(r,i){var s=n(),r=r||{};r.body&&e.merge(s.body,r.body),e.xsr(e.makeUrl(t.recGuessYouLike,s),function(e){try{i&&i(e)}catch(t){throw t}})}function i(n,r){var n=n||{};e.xsr(e.makeUrl(t.recshopcart,n),function(e){try{r&&r(e)}catch(t){throw t}})}function s(n,r){var n=n||{};e.xsr(e.makeUrl(t.RecShopCart,n),function(e){try{r&&r(e)}catch(t){throw t}})}function o(r,i){var s=n(),r=r||{};r.body&&e.merge(s.body,r.body),e.xsr(e.makeUrl(t.cartsimilaritems,s),function(e){try{i&&i(e)}catch(t){throw t}})}function u(r,i){var s=n(),r=r||{};r.body&&e.merge(s.body,r.body),e.xsr(e.makeUrl(t.recLookAgain,s),function(e){try{i&&i(e)}catch(t){throw t}})}function a(r,i){var s=n(),r=r||{};r.body&&e.merge(s.body,r.body),e.xsr(e.makeUrl(t.appMallLook,s),function(e){try{i&&i(e)}catch(t){throw t}})}function f(r,i){var s=n(),r=r||{};r.body&&e.merge(s.body,r.body),e.xsr(e.makeUrl(t.mobileIndexGuess,s),function(e){try{i&&i(e)}catch(t){throw t}})}function l(r,i){var s=n(),r=r||{};r.body&&e.merge(s.body,r.body),e.xsr(e.makeUrl(t.recbuyagain,s),function(e){try{i&&i(e)}catch(t){throw t}})}function c(r,i){var s=n(),r=r||{};r.body&&e.merge(s.body,r.body),e.xsr(e.makeUrl(t.RecKeywordSearch,s),function(e){try{i&&i(e)}catch(t){throw t}})}return{recGuessYouLike:r,recshopcart:i,RecShopCart:s,recLookAgain:u,appMallLook:a,cartsimilaritems:o,mobileIndexGuess:f,recbuyagain:l,RecKeywordSearch:c}}),define("widget/slide",["lib/common"],function(e){"use strict";function t(e,t){function y(){var t=e.getBoundingClientRect(),i=t&&(t.width||t.right-t.left)||e.offsetWidth;a="ontouchstart"in window,f=n.children,l=f.length,c=i/s|0,h=new Array(l),n.style.width=l*c+"px",g=!1,p=function(e){var t=["transition","WebkitTransition","MozTransition","OTransition","msTransition"];for(var n=0,r=t.length;n<r;n++)if(e.style[t[n]]!==undefined)return!0;return!1}(e);for(var o=0;o<l;o++)f[o].style.width=c+"px",p?(f[o].setAttribute("data-index",o),f[o].style.left=-(o*c)+"px",x(o,Math.min(Math.max(o-r,-1),s)*c,0,0)):f[o].style.left=c*(o-r)+"px";e.style.overflow=n.style.overflow="hidden"}function b(e){var e=e||function(){};setTimeout(e,0)}function w(e){return e&&e.getAttribute("data-index")=="0"||e.getAttribute("data-index")?e:e.parentElement?w(e.parentElement):{}}function E(e){return(l+e)%l}function S(e,t,n){return Math.min(Math.max(e,t),n)}function x(e,t,n,r){k(e,t,n,r),h[e]=t||n||0}function T(e){(i||r)&&C(r-1,e)}function N(e){(i||r<l-1-s)&&C(r+1,e)}function C(e,t){var e=e,t=t||o,n=0,u=0,a,f=0,d;if(e!==0&&!e||e==r||l<=s)return;t!==0&&(t=t||o);if(p){a=r-e,d=Math.abs(r-e)/(r-e),f=Math.abs(a);if(i)for(var v=0;v<f;v++)n=h[v]+a*c,x(r+d*v,n,u,t);else{if(d<0){e>l-s&&(e=l-s);for(var v=0;v<f+s;v++)n=Math.max((r+v-e)*c,-c),x(r+v,n,u,t)}else for(var v=0;v<f+s;v++)n=Math.min(v*c,s*c),x(e+v,n,u,t);e=E(e),r=e}}else L()}function k(e,t,n,i){var e=e!==0&&!e?r:e;if(f[e]===undefined||!f[e].style)return;var s=f[e].style,i=i!==0&&!i?o:i,t=t|0,n=n|0,u=["transitionDuration","webkitTransitionDuration","MozTransitionDuration","OTransitionDuration","msTransitionDuration"],a=u.length;for(var l=0;l<a;l++)f[e].style[u[l]]=i+"ms";s.webkitTransform="translate("+t+"px,"+n+"px)"+"translateZ(0)",s.msTransform=s.MozTransform=s.OTransform="translate("+t+"px,"+n+"px)"}function L(){}var e=e||{},n=e.children&&e.children[0],t=t||{},r=t.startIndex|0,i=!!t.continuous,s=t.showNum||3,o=t.speed||300,u=!!t.scrollFlag,a,f,l,c,h,p,d,v,m,g;if(!e||!n)return;this.doSlide=C;var A={handleEvent:function(e){switch(e.type){case"touchstart":this.touchStart(e);break;case"touchmove":this.touchMove(e);break;case"touchend":b(this.touchEnd(e));break;case"transitionend":case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":b(this.transitionEnd(e));break;case"resize":b(y)}},changeHandlerEvent:function(e){},touchStart:function(e){var e=e||window.event,t=e.touches[0]||{};m=w(t.target),d={x:t.pageX,y:t.pageY,time:new Date},n.addEventListener("touchmove",this,!1)},touchMove:function(e){var e=e||window.event;e.preventDefault();if(e.touches.length>1||e.scale&&e.scale!==1)return;var t=e.touches[0];v={x:t.pageX-d.x,y:t.pageY-d.y};if(!u&&!i){var o=Math.abs(v.x)/v.x;if(o<0&&r+s>=l||o>0&&r<=0||d.x<=0||d.x>=s*c){g=!0,d.x=t.pageX,v.x=0;return}if(o>0)for(var a=-1;a<s;a++)k(r+a,v.x+h[r+a],0,0);else for(var a=0;a<=s;a++)k(r+a,v.x+h[r+a],0,0);if(v.x<=-c){h[r]=-c;for(var a=1;a<=s;a++)h[r+a]-=c;r++,d.x-=c}else if(v.x>=c){h[r+s-1]=s*c;for(var a=-1;a<s-1;a++)h[r+a]+=c;r--,d.x+=c}g=!1}n.addEventListener("touchend",this,!1)},touchEnd:function(e){var e=e||window.event,t=new Date-d.time,a,f;e.preventDefault();if(!u){a=Math.abs(v.x)>c/2,f=v.x>0;if(!i)if(f)if(a&&!g&&r>0){for(var p=-1;p<s;p++)x(r+p,h[r+p]+c,0,o);r--}else for(var p=-1;p<s;p++)x(r+p,h[r+p],0,o);else if(a&&!g&&r<l-s){for(var p=0;p<=s;p++)x(r+p,h[r+p]-c,0,o);r++}else for(var p=0;p<=s;p++)x(r+p,h[r+p],0,o)}n.removeEventListener("touchmove",this,!1),n.removeEventListener("touchend",this,!1)},transitionEnd:function(e){}};y(),window.addEventListener?(a&&n.addEventListener("touchstart",A,!1),p&&(n.addEventListener("webkitTransitionEnd",A,!1),n.addEventListener("msTransitionEnd",A,!1),n.addEventListener("oTransitionEnd",A,!1),n.addEventListener("otransitionend",A,!1),n.addEventListener("transitionend",A,!1)),window.addEventListener("resize",A,!1)):window.onresize=function(){y()};if(l<=s)return}return{slide:t}}),define("widget/imgErr",["lib/common"],function(e){function t(t){var t=t||{},n=e.url.getTouchBaseUrl()+"static/img/imgerr/err144x144.png";t.imgsrc&&(n=t.imgsrc);var r=t.selector||"img";e(r).off("error").on("error",function(){if(e(this).attr("src")!="#"){var t=e(this).data("imgsrc"),r=e(this).data("removeerr"),i=e(this).data("ignore");if(r||i)return"";t&&(n=t),e.log(n),e(this).attr("src",n),e(this).data("removeerr",1)}})}return{error:t}}),define("widget/util",[],function(){return{getTime:function(){return(new Date).getTime()},oneOrZero:function(){return Math.round(Math.random())},padZero:function(e,t){var n=e.toString();do{var r=n.indexOf(".")>-1?n.indexOf("."):n.length;r<t&&(n="0"+n)}while(r<t);return n},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"").replace(/(^　*)|(　*$)/g,"")},getId:function(e){return document.getElementById(e)},dateFormat:function(e,t){var e=new Date(e),n={M:e.getMonth()+1,d:e.getDate(),h:e.getHours(),m:e.getMinutes(),s:e.getSeconds(),q:Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()},t=t.replace(/([yMdhmsqS])+/g,function(t,r){var i=n[r];return i!==undefined?(t.length>1&&(i="0"+i,i=i.substr(i.length-2)),i):r==="y"?(e.getFullYear()+"").substr(4-t.length):t});return t},escapeHtml:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return String(e).replace(/[&<>"'\/]/g,function(e){return t[e]})},countdown:function(e,t,n,r){var i=setInterval(function(){if(0>=e){clearInterval(i);try{r&&r()}catch(s){throw s}return}var o=--e;e<10&&(o="0"+e),n.innerHTML=o+t},1e3)},xss:function(e){return e==undefined||typeof e!="string"?e:(e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e)}}}),define("widget/imgHelper",["lib/common"],function(e){function n(e){if(typeof t[e]!="undefined")return t[e];var n=new Image;n.src=e,t[e]=n.src}var t={};return{set_getImg:n}}),define("widget/templateHelper",["lib/common","widget/util","widget/imgHelper"],function(e,t,n){return{helper:function(){e.tpl.helper("dateFormat",function(e,n){var r=t.dateFormat(e,n);return r}),e.tpl.helper("dateTimeFormat",function(e,n){var r=/^(\d{4})(-|\/|\.)(\d{1,2})\2(\d{1,2})(\s+(\d{1,2}):(\d{1,2}):(\d{1,2}))*$/,i=e.match(r);if(i){var s=i[1],o=parseInt(i[3],10)-1,u=i[4],a=i[6]||"",f=i[7]||"",l=i[8]||"",c=new Date(s,o,u,a,f,l),h=c.getTime();return t.dateFormat(h,n)}return""}),e.tpl.helper("timeStampFormat",function(e,n){return t.dateFormat(e||0,n||"")}),e.tpl.helper("dateYMDFormat",function(e,t){var n=e||"",r=t||"";return n.split(" ")[0].replace(/[\.\-\\]/g,"/")}),e.tpl.helper("pointKind",function(e){var t=e||"",n="";switch(t){case"point":n="抵用券";break;case"voucher":n="优惠券";break;case"bonus":n="购物金"}return n}),e.tpl.helper("priceFormat",function(e,t){var t=t||0,e=e||0;return t==0?e=parseFloat(e):t==-1?e=parseInt(e):e=parseFloat(e).toFixed(t),e}),e.tpl.helper("idcardFormat",function(t){if(e.isNull(t))return;var n=4,r=4,i=t.length-n-r,s="";for(var o=0;o<i;o++)s+="*";return t.substr(0,n)+s+t.substr(t.length-r)}),e.tpl.helper("phoneOrEmailFormat",function(t,n){if(e.isNull(t))return;if(n==1){var r=3,i=4,s=t.length-r-i,o="";for(var u=0;u<s;u++)o+="*";return t.substr(0,r)+o+t.substr(t.length-i)}var a=t.substring(0,t.indexOf("@")),f=t.substring(t.indexOf("@"),t.length),r=1,i=1,s=a.length-r-i,o="";for(var u=0;u<s;u++)o+="*";return t.substr(0,r)+o+a.substr(a.length-i)+f}),e.tpl.helper("priceFormat2",function(e){return typeof e=="string"&&(e=parseFloat(e)),isNaN(e)?"0.00":e.toFixed(2)}),e.tpl.helper("getImg",function(e){return n.set_getImg(e)}),e.tpl.helper("intDecimalPrice",function(e,t){var e=e||"0.00",t=t||1,n="";typeof e!="string"&&(e=e.toString());switch(t){case 1:return((e.replace(",","")|0)+"").replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,");case 2:return n=e.split(".")[1],n=n===undefined?"00":n.length==1?n+"0":n,n}}),e.tpl.helper("deCodeHtml",function(e){return e.replace(/&gt;/gi,">").replace(/&lt;/gi,"<")}),e.tpl.helper("removeTag",function(e){return e.replace(/\<[^\<|^\>]*\>/gi,"")}),e.tpl.helper("forNumOpt",function(e){var t="";e=parseInt(e,10);for(var n=1;n<=e;n++)t+='<option value="'+n+'">'+n+"</option>";return t}),e.tpl.helper("getHtmlContent",function(e){return e.match(/>([\s\S]*?)<\//)[1]})}}}),define("widget/appApiBtnCallback",["lib/common"],function(e){function t(t){console.log("callbackData",t);try{var t=JSON.parse(t),n=t.item_type,r=t.req_value;typeof n=="string"&&(n=parseInt(n,10))}catch(i){console.log(i)}switch(n){case 1:e.url.redirect(e.url.getTouchBaseUrl()+"index.html");break;case 2:var s=r.stCategoryId||"",o=["store/category/",s].join("");e.log("店铺内商品分类跳转地址::"+e.url.getTouchBaseUrl()+o),e.url.redirect(e.url.getTouchBaseUrl()+o);break;case 4:var u=r.merchantId||"",a=r.skuid||"",o=["webim/index/",u,"?skuid=",a].join("");e.log("在线客服跳转地址::"+e.url.getTouchBaseUrl()+o),e.url.redirect(e.url.getTouchBaseUrl()+o);break;case 5:var s=r.merchantId||"",o=["store/allgoods/",s].join("");e.log("(搜索）全部宝贝页跳转地址::"+e.url.getTouchBaseUrl()+o),e.url.redirect(e.url.getTouchBaseUrl()+o);break;case 6:e.url.redirect(e.url.getTouchBaseUrl()+"seckill/miji.html");break;default:}}return window.setNavigationBtnCallback=t,t}),define("widget/appApi",["lib/common","config/url","widget/appApiBtnCallback"],function(e,t){function r(){var t=navigator.userAgent;t=t.toLowerCase();if(navigator.userAgent.indexOf("feiniuapp")>-1){var n=navigator.userAgent.split(" ");for(var r=0;r<n.length;r++)if(n[r].indexOf("feiniuapp")>-1){var i=n[r].split("/"),s=i[1].toLowerCase();if(s=="android")return 1;if(s=="iphone")return 2;if(s=="ipad")return 4;if(s=="winphone")return 5}}else{if(e.url.getParam("osType")&&e.url.getParam("osType")!="")return t.match(/MicroMessenger/i)=="micromessenger"?9:e.url.getParam("osType");if(t.match(/MicroMessenger/i)=="micromessenger")return 9}return 3}function i(){var e=navigator.userAgent;e=e.toLowerCase();if(navigator.userAgent.indexOf("feiniuapp")>-1){var t=navigator.userAgent.split(" ");for(var n=0;n<t.length;n++)if(t[n].indexOf("feiniuapp")>-1){var r=t[n].split("/"),i=r[2];return i}}return!1}function o(e,t){if(t==undefined||t=="undefined")t="";s[e]&&(location.href=s[e]+""+t)}function f(e,t){var e=e||function(){},t=t||function(e){};window.FNJSBridge?e(FNJSBridge,t):document.addEventListener("FNJavascriptBridgeReady",function(){e(FNJSBridge,t)},!1)}function l(){if(window.bridgeInit)return"";window.bridgeInit=!0,bridge.init(function(e,t){var n={};t&&t(n)})}function c(e,t){n.bridge=e,n.bridge.init(function(e,n){t&&t(),n&&n()})}function h(){if(!n||typeof n!="object"||typeof n.bridge!="object")return u++,u>a?"":(setTimeout(function(){h()},500),"");n.bridge.callHandler("startLoading","")}function p(){if(!n||typeof n!="object"||typeof n.bridge!="object")return u++,u>a?"":(setTimeout(function(){p()},500),"");n.bridge.callHandler("stopLoading","")}function d(){if(!n.bridge)return;n.bridge.callHandler("stopLoading","")}function v(e){if(!n||typeof n!="object"||typeof n.bridge!="object")return u++,u>a?"":(setTimeout(function(){v(e)},500),"");n.bridge.callHandler("setTitle",e)}function m(e){if(!n||typeof n!="object"||typeof n.bridge!="object")return u++,u>a?"":(setTimeout(function(){m(e)},500),"");n.bridge.callHandler("setActionButtom",JSON.stringify(e))}function g(e){if(!n||typeof n!="object"||typeof n.bridge!="object")return u++,u>a?"":(setTimeout(function(){g(e)},500),"");n.bridge.callHandler("onLoginSuccess",e)}function y(e){if(!n||typeof n!="object"||typeof n.bridge!="object")return u++,u>a?"":(setTimeout(function(){y(e)},500),"");n.bridge.callHandler("setNavigationItem",JSON.stringify(e))}function b(e,t){var i=r();if(i==1){window.FNJSBridge==undefined?document.addEventListener("FNJavascriptBridgeReady",s,!1):s();function s(){n.bridge.callHandler("shareDirectly",JSON.stringify(e),"shareDirectlyCallback")}}else if(i==2){window.FNJSBridge==undefined?document.addEventListener("FNJavascriptBridgeReady",o,!1):o();function o(){n.bridge.callHandler("shareDirectly",JSON.stringify(e),function(e){shareDirectlyCallback(e)}),n.bridge.registerHandler("shareDirectlyCallback",function(e){shareDirectlyCallback(e)})}}}function w(t){function i(){n.bridge.callHandler("setNavigationBtn",JSON.stringify(r),"setNavigationBtnCallback"),n.bridge.registerHandler("setNavigationBtnCallback",function(e,t){setNavigationBtnCallback(e),t()})}var r=S(t,!0);e.log("传给app的参数:",r),window.FNJSBridge==undefined?document.addEventListener("FNJavascriptBridgeReady",i,!1):i()}function E(e){function r(){n.bridge.callHandler("setNavigationBtn",JSON.stringify(t),"setNavigationBtnCallback")}var t=S(e);window.FNJSBridge==undefined?document.addEventListener("FNJavascriptBridgeReady",r,!1):r()}function S(t){var n=t.btnType||"",r=t.btnList,i=[],s={},o=[{name:"首页",req_value:{},icon_url:e.url.getTouchBaseUrl()+"static/img/v2/appimg/home"},{name:"商品分类",req_value:{},icon_url:e.url.getTouchBaseUrl()+"static/img/v2/appimg/category"},{name:"分享",req_value:{url:location.href},icon_url:e.url.getTouchBaseUrl()+"static/img/v2/appimg/share"},{name:"在线客服",req_value:{},icon_url:e.url.getTouchBaseUrl()+"static/img/v2/appimg/message"},{name:"搜索",req_value:{},icon_url:e.url.getTouchBaseUrl()+"static/img/v2/appimg/search"},{name:"秒杀秘籍",req_value:{},icon_url:e.url.getTouchBaseUrl()+"static/img/v2/appimg/seckill"},{name:"H5页面内跳转",req_value:{},icon_url:""}];if(t.btnParam instanceof Array&&t.btnParam.length>0){var u=t.btnParam;return e.each(u,function(e,t){var n=parseInt(r[e]),s=o[n-1];s.item_type=n,!!t.name&&(s.name=t.name),!!t.req_value&&(s.req_value=t.req_value),!!t.icon_url&&(s.icon_url=t.icon_url),i.push(s)}),s={btn_type:n,list:i},s}return e.each(r,function(e,t){var n=parseInt(t,10),r=o[n-1];r.item_type=n,i.push(r)}),s={btn_type:n,list:i},s}function x(e,t){if(!n||typeof n!="object"||typeof n.bridge!="object")return u++,u>a?"":(setTimeout(function(){x(e,t)},500),"");if(typeof e=="undefined")var e="";n.bridge.callHandler("showSearchBar",""+e,function(e){t&&t(e)})}function T(e,t){if(typeof e=="undefined")var e="";var r="",i=/function\s*(\w*)/i,s=i.exec(t.toString());s==null?r=t.toString():r=s[1],n.bridge.callHandler("showSearchBar",""+e,""+r)}function N(e,t){var t=t||[];n.init=t[e-1];switch(e){case 1:n.bridge=window.FNJSBridge,n.startAppLoading=h,n.stopAppLoading=d,n.switchCity=L,n.setTitle=v,n.setNavigationItem=y,n.setNavigationBtn=E,n.openSearchBar=T,n.appWechatShare=b;break;case 2:f(c),n.startAppLoading=h,n.stopAppLoading=p,n.switchCity=k,n.setTitle=v,n.setNavigationItem=y,n.setNavigationBtn=w,n.openSearchBar=x,n.appWechatShare=b;break;case 3:n.bridge=null,n.switchCity=function(){},n.setTitle=function(){},n.setNavigationItem=function(){},n.setNavigationBtn=function(){},n.openSearchBar=function(){},n.appWechatShare=function(){};break;case 9:n.bridge=null,n.switchCity=function(){},n.setTitle=function(){},n.setNavigationItem=function(){},n.setNavigationBtn=function(){},n.openSearchBar=function(){},n.appWechatShare=function(){}}return n}function C(){var n=e.url.getParam("th5_token"),r=e.url.getParam("th5_islogin"),i=e.url.getParam("th5_siteid"),s=e.url.getParam("th5_sitename"),o=e.url.getParam("th5_cartNum"),u=31536e3;r&&e.cookie.addH5("islogin",r,"/",u,t.cookieDomain),n&&e.cookie.addH5("token",n,"/",u,t.cookieDomain),i&&e.cookie.addH5("siteid",i,"/",u,t.cookieDomain);if(s)e.cookie.addH5("sitename",s,"/",u,t.cookieDomain);else{var a=decodeURIComponent(e.cookie.getH5("sitename"));e.cookie.addH5("sitename",a,"/",u,t.cookieDomain)}o&&e.cookie.addH5("cartNum",o,"/",u,t.cookieDomain)}function k(e,t){if(!n||typeof n!="object"||typeof n.bridge!="object")return u++,u>a?"":(setTimeout(function(){k(e,t)},500),"");var e=e||{};n.bridge.callHandler("switchCity",JSON.stringify(e),function(e){t&&t(JSON.parse(e))})}function L(e,t){var e=e||{},r=n.bridge.callHandler("switchCity",JSON.stringify(e));t&&t(JSON.parse(r))}var n={},s={activeUrl:"www2fn://OpenUrl?url=",categoryUrl:"www2fn://GetSMbyCategory?si_seq=",searchUrl:"www2fn://GetSMbyKey?keywords=",storeUrl:"www2fn://GetMerchandise?sm_seq=",appHomeUrl:"www2fn://GoHome?refresh=",sellUrl:"www2fn://Camp?campSeq=",touchDetailUrl:e.url.getTouchBaseUrl()+"item/",channelUrl:"www2fn://OpenUrl?url=",loginUrl:"www2fn://Login?url=",switchSiteidUrl:"www2fn://SwitchSiteidSiteName",chooseStandard:"www2fn://ChooseStandard?sm_seq=",gotoCartUrl:"www2fn://GoCart",shake:"www2fn://Shake"},u=0,a=10;return window.bridgeInit||(window.bridgeInit=!1),C(),{getAppid:r,goToApp:o,getAppVersion:i,connectWebViewJavascriptBridge:f,bridgeInit:l,getIphoneBridge:c,distScene:N,setOnLoginSuccess:g,appWechatShare:b,getCommonParam:C}}),define("widget/createLookLike",["lib/common","model/recommend/index","widget/slide","widget/imgErr","widget/templateHelper","widget/appApi"],function(e,t,n,r,i,s){"use strict";function f(t){if(typeof t.api=="undefined"||typeof t.id=="undefined")return;t.showNum=t.showNum||4,t.title=t.title||"猜你喜欢",t.isMore=t.isMore||0,t.isHr=t.isHr||0,t.body&&e.extend(a.body,t.body);var i=document.getElementById(t.id),s=["{{each recommendList as v i}}","{{if i>0}}",'   <div class="hr1"></div>',"{{/if}}",'<div class="guess_love">','   <div class="gl_title"><div>',"           {{if isMore}}","{{v.keyword}}</div>","   <div onclick=\"window.location.href='../list/index?kw={{v.keyword}}'\">查看更多</div>","           {{else}}","{{title}}</div>","           {{/if}}","</div>",'   <div id="slide_{{i}}">','       <ul class="gl_adc">',"           {{each v.MerchandiseList as value}}","               <li>","                   <a href=//"+location.host+"/item/{{value.sm_seq}}>",'                       <div class="gl_img"><img src="{{value.sm_pic}}" title="{{value.sm_name}}" alt="{{value.sm_name}}" ></div>','                       <h4 class="gl_name">{{value.sm_name}}</h4>','                       <p class="gl_price">￥{{value.sm_price | priceFormat2}}</p>',"                   </a>","               </li>","           {{/each}}","       </ul>","   </div>","</div>","{{/each}}","{{if isHr}}",'   <div class="hr1"></div>',"{{/if}}"].join("");i.innerHTML=s,t.api(a,function(i){if(!i.errorCode){if(typeof t.moreStyle=="object"&&i.body[t.moreStyle.name]&&i.body[t.moreStyle.name]==t.moreStyle.value&&typeof t.moreStyle.bkFun=="function"){t.moreStyle.bkFun(i);return}i.body.title=t.title,i.body.isMore=t.isMore,i.body.isHr=t.isHr,e.tplRender(t.id,i.body);for(var s=0;s<i.body.recommendList.length;s++)new n.slide(document.getElementById("slide_"+s),{showNum:t.showNum});r.error({});if(typeof t.bkFun=="function"){t.bkFun(i);return}}})}var o,u=s.getAppid();switch(u){case 1:o="a";break;case 2:o="i";break;default:o="t"}i.helper();var a={token:e.cookie.getH5("token"),areaCode:e.cookie.getH5("siteid"),body:{items_id:"",uuid:"",mem_guid:e.cookie.getH5("mem_guid"),from:o}};return{createLookLike:f}}),define("api/cartV2.2",["config/url"],function(e){return{queryShopCart:{url:e.sappsDomain+"shopcart/AdminShopcart?"+ +(new Date),isOnlyData:1,post:{apiVersion:e.apiVersion,areaCode:"?",token:"?",body:"??"},body:{isGet:"?",areaCode:"?",action:"?",is_seperate:"?",card_used:"?",vouchers:"?",consignee:"?",use_score:"?",pay_code:"?",is_overseas:"?",group_act_seq:"?",group_seq:"?",merchant_id:"?",overseas_mode:"?",overseas_customs:"?",overseas_provider:"?",shop_point:"?",vvip_card_num:"?",vvip_card_phone:"?"},method:"post"},updateShopCart:{url:e.sappsDomain+"shopcart/AdminShopcart",isOnlyData:1,post:{apiVersion:e.apiVersion,areaCode:"?",token:"?",body:"??"},body:{action:"?",camp_seq:"?",product_list:"?"},method:"post"},modifyShopCart:{url:e.sappsDomain+"shopcart/AdminShopcart",isOnlyData:1,post:{apiVersion:e.apiVersion,areaCode:"?",token:"?",body:"??"},body:{isGet:"?",areaCode:"?",action:"?",type:"?",is_prompt:"?",is_seperate:"?",row_list:"?",is_overseas:"?",not_get:"?"}},deleteShopCart:{url:e.sappsDomain+"shopcart/AdminShopcart",isOnlyData:1,post:{apiVersion:e.apiVersion,areaCode:"?",token:"?",body:"??"},body:{isGet:"?",action:"?",token:"?",row_list:"?"}},addShopCart:{url:e.sappsDomain+"shopcart/AdminShopcart",isOnlyData:1,post:{apiVersion:e.apiVersion,areaCode:"?",token:"?",body:"??"},body:{isGet:"?",areaCode:"?",action:"?",is_seperate:"?",product_list:"?"}},bindidentityCard:{apiName:"userinfoBindidentitycard",post:{areaCode:"?",token:"?",body:"??"},body:{identity_card_no:"?",identity_card_name:"?"},isOnlyData:1,method:"post"},addFavorite:{url:e.sappsDomain+"shopcart/AdminShopcart",post:{apiVersion:e.apiVersion,areaCode:"?",token:"?",body:"??"},body:{action:"?",product_list:"?"},isOnlyData:1,method:"post"}}}),define("model/cart/cartV2.2",["lib/common","api/cartV2.2","widget/stat","config/url"],function(e,t,n,r){function i(){var t={areaCode:e.cookie.getH5("siteid"),token:e.cookie.getH5("token"),body:{isGet:1,areaCode:e.cookie.getH5("siteid"),action:4,is_seperate:0,card_used:0,vouchers:"",consignee:"",use_score:0,pay_code:0,is_overseas:0,merchant_id:"",overseas_mode:"",overseas_customs:"",overseas_provider:""}};return t}function s(n,r){var i={areaCode:e.cookie.getH5("siteid"),token:e.cookie.getH5("token"),body:{action:8,camp_seq:"",product_list:[{sm_seq:"",type:"",qty:"",kind:"",index:""}]}};n=n||{},n.body&&e.merge(i.body,n.body),e.xsr(e.makeUrl(t.updateShopCart,i),function(e){r&&r(e)})}function o(){var t={areaCode:e.cookie.getH5("siteid"),token:e.cookie.getH5("token"),body:{isGet:1,areaCode:e.cookie.getH5("siteid"),action:2,is_seperate:0,type:1,row_list:[]}};return t}function u(){var t={areaCode:e.cookie.getH5("siteid"),token:e.cookie.getH5("token"),body:{isGet:1,action:3,token:e.cookie.getH5("token"),row_list:[]}};return t}function a(){var t={areaCode:e.cookie.getH5("siteid"),token:e.cookie.getH5("token"),body:{isGet:1,areaCode:e.cookie.getH5("siteid"),action:1,is_seperate:0,product_list:[]}};return t}function f(n,s){var o=i(),n=n||{};n.body&&e.merge(o.body,n.body),e.xsr(e.makeUrl(t.queryShopCart,o),function(t){try{t&&t.body&&e.cookie.addH5("cartNum",t.body.total_items,"/",31536e3,r.cookieDomain),s&&s(t)}catch(n){throw n}})}function l(n,i){var s=u(),n=n||{};n.body&&e.merge(s.body,n.body),e.xsr(e.makeUrl(t.modifyShopCart,s),function(t){t&&t.body&&e.cookie.addH5("cartNum",t.body.total_items,"/",31536e3,r.cookieDomain),i&&i(t)})}function c(n,i){var s=o(),n=n||{};n.body&&e.merge(s.body,n.body),e.xsr(e.makeUrl(t.deleteShopCart,s),function(t){try{t&&t.body&&e.cookie.addH5("cartNum",t.body.total_items,"/",31536e3,r.cookieDomain),i&&i(t)}catch(n){throw n}})}function h(i,s){var o=a(),i=i||{};i.body&&e.merge(o.body,i.body);var u=/^\+?[1-9][0-9]*$/.test(i.body.product_list[0].sm_seq),f={track_tag_name:u?"4033":"4004",result:i.body.product_list[0].qty||"",page_content:i.body.product_list[0].sm_seq||"",message:"",remarks:"1",track_type:"2"};n.shangbao(f),e.xsr(e.makeUrl(t.addShopCart,o),function(t){try{t&&t.body&&e.cookie.addH5("cartNum",t.body.total_items,"/",31536e3,r.cookieDomain),s&&s(t)}catch(n){throw n}})}function p(n,r){var i=d();n=n||{},n.body&&e.merge(i.body,n.body),e.xsr(e.makeUrl(t.bindidentityCard,i),function(e){try{r&&r(e)}catch(t){throw t}})}function d(){var t={areaCode:e.cookie.getH5("siteid"),token:e.cookie.getH5("token"),body:{identity_card_no:"",identity_card_name:""}};return t}function v(t){var n={areaCode:e.cookie.getH5("siteid"),token:e.cookie.getH5("token"),body:{product_list:t}};return n}function m(n,r){var i=v(n);i.body.action=9,e.xsr(e.makeUrl(t.addFavorite,i),function(e){try{r&&r(e)}catch(t){throw t}})}return{getQueryCartData:i,getModifyCartData:o,getDeleteCartData:u,getAddCartData:a,queryShopCart:f,modifyShopCart:l,deleteShopCart:c,addShopCart:h,bindidentityCard:p,updateShopCart:s,addFavorite:m}}),define("widget/ticket",["lib/common","widget/loadingV2","widget/popAlert","config/url"],function(e,t,n,r){function i(){}return i.prototype.getNewUserTicket=function(t){var i=this,s=e.cookie.getH5("ticketstatus"),o=e.cookie.getH5("ticketpoint"),u=e.cookie.getH5("ticketactname"),a=e.cookie.getH5("ticketdesc"),f="http://a.app.qq.com/o/simple.jsp?pkgname=com.feiniu.market&ckey=CK1295454994221";if(!s)return;var l=s==1?{one:{name:"立即使用",fun:function(){e.url.redirect(f)}},two:{name:"查看卡券",fun:function(){location.href=e.url.getTouchBaseUrl()+"my/cardlist.html"}}}:{one:{name:"&nbsp;去逛逛&nbsp;",fun:function(){e.url.redirect(f)}},two:{name:"查看卡券",fun:function(){location.href=e.url.getTouchBaseUrl()+"my/cardlist.html"}}};n.popdefine(i.getTicketAlertData(e.extend({tip:s==1?"送券啦~就是那么任性！！！":"非常抱歉",msg:s==1?"飞牛送您<span class='red'>"+o+"</span>元 "+u:a},l))),t&&t(),e.cookie.delH5("thirdlogintype","/",r.cookieDomain),e.cookie.delH5("qqticket","/",r.cookieDomain),e.cookie.delH5("ticketstatus","/",r.cookieDomain),e.cookie.delH5("ticketdesc","/",r.cookieDomain),e.cookie.delH5("ticketpoint","/",r.cookieDomain),e.cookie.delH5("ticketactname","/",r.cookieDomain)},i.prototype.getTicketAlertData=function(e){return{tip:e.tip,msg:e.msg,popClass:"pop_ticket",clickCoverRemove:!0,one:e.one,two:e.two}},new i}),define("api/moumou",["lib/common","config/url"],function(e,t){return{initEvent:{url:t.mDomain+"mwebim/im",isOnlyData:0,get:{token:e.cookie.getH5("token"),event:"INIT_CHAT_ENV",sid:"0",ismobile:"1",pid:"0",osType:"3"},method:"get"},getRecentContact:{url:t.mDomain+"mwebim/im",isOnlyData:0,get:{token:e.cookie.getH5("token"),event:"GET_RECENTYLE_MOBILE_CONTACTS_FOR_BUYER",ismobile:"1",osType:"3",needClearCurrentMerchantId:"true",sid:"?",uuid:"?"},method:"get"}}}),define("model/my/moumou",["lib/common","api/moumou"],function(e,t){function n(e){return{sid:e.sid,uuid:e.uuid}}function r(r,i){var s=n(r),r=r||{};r&&e.merge(s,r),e.xsr(e.makeUrl(t.initEvent,s),function(e){try{i&&i(e)}catch(t){throw t}})}function i(r,i){var s=n(r),r=r||{};r&&e.merge(s,r),e.xsr(e.makeUrl(t.getRecentContact,s),function(e){try{i&&i(e)}catch(t){throw t}})}return{initEvent:r,getRecentContact:i}}),require(["lib/common","model/searchMember","model/jifen/index","config/url","widget/loadingV2","widget/stat","model/account/myAccount","widget/popAlert","widget/createLookLike","model/cart/cartV2.2","config/url","widget/ticket","model/recommend/index","model/my/moumou"],function(e,t,n,r,i,s,o,u,a,f,r,l,c,h){function b(e,t){var n={track_tag_name:e.ttn||"",result:"",page_content:"",track_type:e.tt||"1",remarks:e.rk||"",message:e.msg||"-9"};s.shangbao(n,t)}function w(t){return function(){var n=t.attr("data-href"),r=e.cookie.getH5("islogin");!r||r!=1?e.url.redirect(e.url.getTouchBaseUrl()+"login/index.html?gotourl="+encodeURIComponent(n)):e.url.redirect(n)}}function E(){var t=e(this).data("name");if(t){var n={ttn:t,tt:"2"};b(n,w(e(this)))}else w(e(this))()}function S(t,n){var i=n.nickname,s=n.userCellphone,o=n.mem_name;i||(s&&(s=s.substring(0,2)+"****"+s.substring(s.length-3,s.length)),i=s,i||(i=o)),e("#username").html(i);var u=n.head_portrait;e.isNull(u)||e(".J_avatar").attr("src",u),e("#integral").text(t.allScore||0),p=typeof t.allScore=="string"?parseInt(t.allScore):t.allScore,e(".J_itemCount").text(t.itemCount),e(".J_mallCount").text(t.mallCount);var a=n.isvvip;a&&e("#username").after("<em></em>");var f=n.memLevelIcon;f?e(".level_img").attr("src",f):e(".level_img").remove(),e(".level_text").text(n.memLevelDesc),t.isSigned?e(".signin_text").html("<i class='icon iconfont'>&#xe62a;</i>已签到"):(e(".signin_text").html("<i class='icon iconfont'>&#xe62a;</i>签到领积分"),e(".signin").on("click",function(){N()})),n.moumouNewMsg>0&&e(".moumou_list").html("&#xe63b;<b></b>"),e(".moumou_list").on("click",function(t){b({ttn:"7003",msg:"2",tt:"2"}),setTimeout(function(){e.url.redirect(r.mmDomain+"webim/merchantList/")},200)}),e(".my_login .content").on("click",function(){e.url.redirect(e.url.getTouchBaseUrl()+"my/member/index.html")})}function x(){e(".con_r_icon_txt").html(""),e(".con_r_icon").css("display","none");var t={body:{}};o.freeBuyForCard(t,function(t){e.log("=========乐惠0元开卡礼接口(vvip/freeBuyForCard)返回数据===========:",t);var n=t.body;t.errorCode==0&&t.body?(e(".content_img").attr("src",n.pic),e(".con_r_txt").html(n.name),e(".popup_box").css("display","block"),T(t)):(u.popalert(t.errorDesc,!0),e.log("【出错啦！】【接口返回数据错误】【data.errorCode:"+t.errorCode+"】【data.errorDesc:"+t.errorDesc+"】【freeBuyForCard乐惠0元开卡礼接口】"))})}function T(t){e("body").on("click",".popup_box",function(){e(this).css("display","none")}),e(".popup").on("click",function(e){e.stopPropagation()}),e(".g_cart").on("click",function(){if(!d.isAddCart){e(".con_r_icon_txt").html(""),e(".con_r_icon").css("display","none");var n={body:{product_list:[{sm_seq:t.body.smSeq,type:t.body.is_mall,kind:t.body.kind,qty:1}]}};d.isAddCart=!0,f.addShopCart(n,function(t){e.log("==========乐惠0元开卡礼加入购物车========:",t),t.errorCode==0&&t.body?(e(".popup_box").css("display","none"),u.popalert("加入购物车成功!",!0)):(e(".con_r_icon_txt").html(t.errorDesc),e(".con_r_icon").css("display","block"),e.log("【出错啦！】【接口返回数据错误】【data.errorCode:"+t.errorCode+"】【data.errorDesc:"+t.errorDesc+"】")),d.isAddCart=!1})}})}function N(){d.isSignin||(d.isSignin=!0,o.signin({},function(t){e.log("=======signin签到送积分接口(/misc/signin)数据返回========:",t),d.isSignin=!1;if(t.errorCode==0&&t.body){b({ttn:"5070",tt:"2"});var n=t.body,r=n.code;if(r==100){var i=typeof t.body.signAddScore=="string"?parseInt(t.body.signAddScore||"0"):t.body.signAddScore;e.log("signAddScore:",i),C(i),u.popdefine({msg:t.body.msg,one:{name:"关闭",fun:function(){e.url.redirect(e.url.getTouchBaseUrl()+"my/index.html")}},id:"coupon",tip:""})}else r==506?u.popdefine({msg:t.body.msg,one:{name:"关闭",fun:""},id:"coupon",tip:""}):r==507?u.popdefine({msg:t.body.msg,one:{name:"关闭",fun:""},two:{name:"去逛逛",fun:function(){var t=e.url.getTouchBaseUrl();e.url.redirect(t)}},id:"coupon",tip:""}):u.popdefine({msg:t.body.msg,one:{name:"关闭",fun:""},id:"coupon",tip:""})}else u.popalert("网络错误，请稍后再试",!0),e.log("【出错啦！】【接口返回数据错误】【data.errorCode:"+t.errorCode+"】【data.errorDesc:"+t.errorDesc+"】【signin签到送积分接口】")}))}function C(t){var n=p+t;e.log("==================签到成功后刷新积分================："+n),e(".C_integral").text(n)}function k(){function s(){if(r!=""&&n!=""){var t={sid:r,uuid:n};$el=e(".my_top .icon_xinxi"),h.getRecentContact(t,function(t){try{t.success&&t.data.contactList&&e.each(t.data.contactList,function(e,t){if(t.unreadMsgCount)return $el.find("b").length==0&&$el.append("<b></b>"),!1})}catch(n){u.popalert("获取哞哞消息时，发生脚本异常："+n.name+"（"+n.message+"）",!0,999999)}})}}var t={},n="",r="";try{h.initEvent(t,function(e){if(e.success){r=e.data.userID,n=e.data.uuid;try{s()}catch(t){u.popalert("初始化哞哞时，发生脚本异常："+t.name+"（"+t.message+"）",!0,999999)}}})}catch(i){u.popalert("初始化哞哞时，发生脚本异常："+i.name+"（"+i.message+"）",!0,999999)}}var p=0,d={};d.isAddCart=!1,d.isSignin=!1;var v=e.cookie.getH5("islogin");if(!v||v!=1){var m=e.url.getTouchBaseUrl()+"my/index.html";e.url.redirect(e.url.getTouchBaseUrl()+"login/index.html?gotourl="+encodeURIComponent(m));return}var g=e.cookie.getH5("accountType")||"";if(g==2){var y=e.cookie.getH5("headimgurl");e.isNull(y)||e(".J_avatar").attr("src",y)}e.getToken(function(){g==1&&t.getSearchMember({},function(t){var n=t.body.mem_username||"";n&&(e.cookie.addH5("username",n,"/",31536e3,r.cookieDomain),e("#username").text(n))});var n={body:{}};o.memberIndex(n,function(t){try{e.log("==================获取我的账户首页合并信息(memberIndex接口返回信息)=================",t);if(t.errorCode===0&&t.body){var n=e("#account"),s=t.body.head,o=t.body.userInfo,f=t.body.orderSummary;e(".J_hidden").css({visibility:""}),s&&o&&S(s,o),e.tplRender("tpl_accountList",t.body),console.log(t.body),n.on("click",".J_checkLogin",E),n.on("click",".C_freeshop",x);var l={id:"tpl_guessULike",api:c.RecShopCart,showNum:4};a.createLookLike(l),f&&e.each(f,function(t,n){var r=n.count;if(r>0){r>99&&(r="99+");var i=n.orderType;i==2?e(".W_payment").html(r).css("display","block"):i==7?e(".W_shipments").html(r).css("display","block"):i==3?e(".W_delivery").html(r).css("display","block"):i==8&&e(".W_comment").html(r).css("display","block")}})}else t.errorCode==1e3||t.errorCode==2001?(e.log("【出错啦！】【token过期】【接口返回数据错误】【data.errorCode:"+t.errorCode+"】【data.errorDesc:"+t.errorDesc+"】【memberIndex接口】"),e.cookie.delH5("token","/",r.cookieDomain),e.cookie.delH5("islogin","/",r.cookieDomain),e.cookie.delH5("username","/",r.cookieDomain),u.popalert("网络错误，请稍后再试",!0)):t.errorCode==9001?(e.logOut(),t.errorDesc?(u.popalert(t.errorDesc,!0),setTimeout(function(){e.url.redirect(r.loginUrl)},1500)):e.url.redirect(r.loginUrl)):(e.log("【出错啦！】【接口返回数据错误】【data.errorCode:"+t.errorCode+"】【data.errorDesc:"+t.errorDesc+"】【memberIndex接口】"),u.popalert("网络错误，请稍后再试",!0))}catch(h){u.popalert("获取用户信息时，发生脚本异常："+h.name+"（"+h.message+"）",!0,999999)}i.on(!1,"v2",1)}),l.getNewUserTicket(),k()}),b({ttn:"5001"})}),define("controller/my/indexV2.3",function(){});